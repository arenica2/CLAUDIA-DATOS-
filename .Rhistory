chisq.test (housevisitsG)
fisher.test(housevisitsG)
housevisitsH <-
matrix(c(115,8,
104,95),
nrow = 2,
byrow = TRUE,
dimnames = list("app"= c("highest2","lowest3"),
"croquis"=c("highest2","lowest3")))
mcnemar.test(housevisitsH)
chisq.test (housevisitsH)
fisher.test(housevisitsH)
#3d contingency table for Maental Hansen test
ct1 <- xtabs(visits ~ arm + cat +inspector, data=dat1)
ftable(ct1)
file = file.choose() #file name: 'Risk levels visited_clean'
#Corresponding figure code file: 'risk levels visited stacked figure data'
ct2 <- xtabs(visits ~ arm + cat1 +inspector, data=dat1)
data<-fread("~/PETM-shiny/BackUp_App_Inspections/Back_Up_App_Inspections_08_Feb_2018.csv")
setnames(data,old = 'UNI_CODE',new = 'UNICODE')
data$USER_NAME <- toupper(data$USER_NAME)
#get percentages like jenni's figures
library(ggplot2)
library(ggthemes)
library(extrafont)
library(plyr)
library(scales)
library(gridExtra)
library(grid)
#getting the data
library(data.table)
library(reshape)
library(reshape2)
library(tidyr)
#get percentages like jenni's figures
library(ggplot2)
library(ggthemes)
library(extrafont)
library(plyr)
library(scales)
library(gridExtra)
library(grid)
#getting the data
library(data.table)
library(reshape)
library(reshape2)
library(tidyr)
data<-fread("~/PETM-shiny/BackUp_App_Inspections/Back_Up_App_Inspections_08_Feb_2018.csv")
setnames(data,old = 'UNI_CODE',new = 'UNICODE')
data$USER_NAME <- toupper(data$USER_NAME)
data<-data[STATUS_INSPECCION == "inspeccion",STATUS_INSPECCION:="I"]
data<-data[TEST_DATA==0]
data<-data[FECHA >='2018-01-15']
head(data)
data<-data[PREDICTED_COLOR=="#E31A1C",PREDICTED_COLOR:="#BD0026"]
table(data$USER_NAME )
# R25 R26 R27 R28 R29 R30 R31 R32 R33 R34 R35 R36 R37 R38 R39 R40  R8
# 141  71  99  79 107  89 108 150  84 111  63 157 115 110 114 112  10
data<-data[!USER_NAME=='R8']
data<-data[STATUS_INSPECCION == "entrevista",STATUS_INSPECCION:="E"]
# PUTTING NAMES TO INSPECTORS
data<-data[USER_NAME=="R29"|USER_NAME=="R35",USER_NAME:="D"]
data<-data[USER_NAME=="R33"|USER_NAME=="R28",USER_NAME:="A"]
data<-data[USER_NAME=="R36"|USER_NAME=="R32",USER_NAME:="F"]
data<-data[USER_NAME=="R25"|USER_NAME=="R39",USER_NAME:="C"]
data<-data[USER_NAME=="R37"|USER_NAME=="R30",USER_NAME:="B"]
data<-data[USER_NAME=="R31"|USER_NAME=="R26",USER_NAME:="E"]
data<-data[USER_NAME=="R34"|USER_NAME=="R40",USER_NAME:="G"]
data<-data[USER_NAME=="R27"|USER_NAME=="R38",USER_NAME:="H"]
#GETTING INCENTIVES AND NO INCENTIVES
data<-data[GROUP_NAME=="RISK_29",GROUP_NAME:="1"]
data<-data[GROUP_NAME=="RISK_35",GROUP_NAME:="0"]
data<-data[GROUP_NAME=="RISK_28",GROUP_NAME:="1"]
data<-data[GROUP_NAME=="RISK_33",GROUP_NAME:="0"]
data<-data[GROUP_NAME=="RISK_36",GROUP_NAME:="1"]
setnames(data,old = 'UNI_CODE',new = 'UNICODE')
data$USER_NAME <- toupper(data$USER_NAME)
data<-data[STATUS_INSPECCION == "inspeccion",STATUS_INSPECCION:="I"]
data<-fread("~/PETM-shiny/BackUp_App_Inspections/Back_Up_App_Inspections_08_Feb_2018.csv")
setnames(data,old = 'UNI_CODE',new = 'UNICODE')
data$USER_NAME <- toupper(data$USER_NAME)
data<-data[STATUS_INSPECCION == "inspeccion",STATUS_INSPECCION:="I"]
data<-data[TEST_DATA==0]
data<-data[FECHA >='2018-01-15']
head(data)
data<-data[PREDICTED_COLOR=="#E31A1C",PREDICTED_COLOR:="#BD0026"]
table(data$USER_NAME )
# R25 R26 R27 R28 R29 R30 R31 R32 R33 R34 R35 R36 R37 R38 R39 R40  R8
# 141  71  99  79 107  89 108 150  84 111  63 157 115 110 114 112  10
data<-data[!USER_NAME=='R8']
data<-data[STATUS_INSPECCION == "entrevista",STATUS_INSPECCION:="E"]
# PUTTING NAMES TO INSPECTORS
data<-data[USER_NAME=="R29"|USER_NAME=="R35",USER_NAME:="D"]
data<-data[USER_NAME=="R33"|USER_NAME=="R28",USER_NAME:="A"]
data<-data[USER_NAME=="R36"|USER_NAME=="R32",USER_NAME:="F"]
data<-data[USER_NAME=="R25"|USER_NAME=="R39",USER_NAME:="C"]
data<-data[USER_NAME=="R37"|USER_NAME=="R30",USER_NAME:="B"]
data<-data[USER_NAME=="R31"|USER_NAME=="R26",USER_NAME:="E"]
data<-data[USER_NAME=="R34"|USER_NAME=="R40",USER_NAME:="G"]
data<-data[USER_NAME=="R27"|USER_NAME=="R38",USER_NAME:="H"]
#GETTING INCENTIVES AND NO INCENTIVES
data<-data[GROUP_NAME=="RISK_29",GROUP_NAME:="1"]
data<-data[GROUP_NAME=="RISK_35",GROUP_NAME:="0"]
data<-data[GROUP_NAME=="RISK_28",GROUP_NAME:="1"]
data<-data[GROUP_NAME=="RISK_33",GROUP_NAME:="0"]
data<-data[GROUP_NAME=="RISK_36",GROUP_NAME:="1"]
data<-data[GROUP_NAME=="RISK_32",GROUP_NAME:="0"]
data<-data[GROUP_NAME=="RISK_39",GROUP_NAME:="1"]
data<-data[GROUP_NAME=="RISK_25",GROUP_NAME:="0"]
data<-data[GROUP_NAME=="RISK_37",GROUP_NAME:="1"]
data<-data[GROUP_NAME=="RISK_30",GROUP_NAME:="0"]
data<-data[GROUP_NAME=="RISK_26",GROUP_NAME:="1"]
data<-data[GROUP_NAME=="RISK_31",GROUP_NAME:="0"]
data<-data[GROUP_NAME=="RISK_40",GROUP_NAME:="1"]
data<-data[GROUP_NAME=="RISK_34",GROUP_NAME:="0"]
data<-data[GROUP_NAME=="RISK_27",GROUP_NAME:="1"]
data<-data[GROUP_NAME=="RISK_38",GROUP_NAME:="0"]
data$COUNT<-unlist(1)
data_1<-aggregate(COUNT ~ PREDICTED_COLOR+USER_NAME, data=data, FUN=sum)
# PREDICTED_COLOR USER_NAME COUNT
# 1          #BD0026         A    39
# 2          #F03B20         A    47
# 3          #FD8D3C         A    22
# 4          #FECC5C         A    22
# 5          #FFFFB2         A    33
# 6          #BD0026         B   112
# 7          #E31A1C         B     6
# 8          #F03B20         B    38
# 9          #FD8D3C         B    29
# 10         #FECC5C         B    11
# 11         #FFFFB2         B     8
# 12         #BD0026         C   132
# 13         #F03B20         C    67
# 14         #FD8D3C         C    30
# 15         #FECC5C         C    18
# 16         #FFFFB2         C     8
# 17         #808080         D     6
# 18         #BD0026         D    39
# 19         #F03B20         D    36
# 20         #FD8D3C         D    43
# 21         #FECC5C         D    34
# 22         #FFFFB2         D    12
# 23         #808080         E     2
# 24         #BD0026         E    55
# 25         #F03B20         E    20
# 26         #FD8D3C         E    42
# 27         #FECC5C         E    32
# 28         #FFFFB2         E    28
# 29         #BD0026         F    66
# 30         #F03B20         F   104
# 31         #FD8D3C         F    60
# 32         #FECC5C         F    29
# 33         #FFFFB2         F    48
# 34         #808080         G     3
# 35         #BD0026         G    68
# 36         #F03B20         G    43
# 37         #FD8D3C         G    34
# 38         #FECC5C         G    49
# 39         #FFFFB2         G    26
# 40         #808080         H     1
# 41         #BD0026         H    80
# 42         #F03B20         H    47
# 43         #FD8D3C         H    18
# 44         #FECC5C         H    27
# 45         #FFFFB2         H    36
#write.csv(data_1,"~/PETM-shiny/VectorPoint_Experiment_1_PAUCARPATA/RESULTS/houses_user_riskcolor.csv",row.names = FALSE)
b<-aggregate(COUNT~USER_NAME,data =data_1,FUN = sum)
#    USER_NAME COUNT
# 1         A   163
# 2         B   204
# 3         C   255
# 4         D   170
# 5         E   179
# 6         F   307
# 7         G   223
# 8         H   209
#write.csv(b,"~/PETM-shiny/VectorPoint_Experiment_1_PAUCARPATA/RESULTS/consolidate.csv",row.names = FALSE)
data_resumen_semana<-merge(b,data_1,by = "USER_NAME",all = TRUE)
setnames(data_resumen_semana,"COUNT.x","TOTAL_VISITAS")
setnames(data_resumen_semana,"COUNT.y","VISITAS_RISK_COLOR")
data_resumen_semana$PERCENTAGE <- (data_resumen_semana$VISITAS_RISK_COLOR / data_resumen_semana$TOTAL_VISITAS) * 100
options(digits=2)
data_2<-aggregate(COUNT~USER_NAME+STATUS_INSPECCION,data = data,FUN = sum)
#     C   I   R   V
# A  45 114   0   3
# B  58  93  10  43
# C  80  90  63  21
# D   4 166   0   0
# E  61  91   9  13
# F 125 101  49  32
# G  89 106   9  19
View(data_2)
# H  71 105  23  10
#write.csv(data_2,"~/PETM-shiny/VectorPoint_Experiment_1_PAUCARPATA/RESULTS/STATUS_VS_USERNAME.csv",row.names = FALSE)
table(data$USER_NAME,data$PREDICTED_COLOR)
INCENTIVOS<-data[data$GROUP_NAME=='1']
INCENTIVOS_1<-aggregate(COUNT ~ PREDICTED_COLOR+USER_NAME, data=INCENTIVOS, FUN=sum)
INCENTIVOS_2<-aggregate(COUNT ~ PREDICTED_COLOR+USER_NAME+STATUS_INSPECCION, data=INCENTIVOS, FUN=sum)
View(INCENTIVOS_2)
CONSOLIDADO<-aggregate(COUNT~USER_NAME,data = INCENTIVOS_1,FUN = sum)
INC<-merge(CONSOLIDADO,INCENTIVOS_1,by = "USER_NAME",all = TRUE)
INC$PERCENTAGE<- (INC$COUNT.y / INC$COUNT.x) * 100
INC$INCENTIVOS<-unlist(1)
#write.csv(INC,"~/PETM-shiny/VectorPoint_Experiment_1_PAUCARPATA/RESULTS/INCENTIVOS.csv",row.names = FALSE)
#no incentivos
NO_INCENTIVOS<-data[data$GROUP_NAME=='0']
NO_INCENTIVOS_1<-aggregate(COUNT ~ PREDICTED_COLOR+USER_NAME, data=NO_INCENTIVOS, FUN=sum)
NO_INCENTIVOS_2<-aggregate(COUNT ~ PREDICTED_COLOR+USER_NAME+STATUS_INSPECCION, data=NO_INCENTIVOS, FUN=sum)
CONSOLIDADO_NO<-aggregate(COUNT~USER_NAME,data = NO_INCENTIVOS_1,FUN = sum)
View(CONSOLIDADO)
INC_NO<-merge(CONSOLIDADO_NO,NO_INCENTIVOS_1,by = "USER_NAME",all = TRUE)
INC_NO$PERCENTAGE<- (INC_NO$COUNT.y / INC_NO$COUNT.x) * 100
INC_NO$INCENTIVOS<-unlist(0)
DATA_RISK_USER_INCENTIVES<-rbind(INC,INC_NO)
setDT(DATA_RISK_USER_INCENTIVES)
DATA_RISK_USER_INCENTIVES<-DATA_RISK_USER_INCENTIVES[PREDICTED_COLOR=="#BD0026",PREDICTED_COLOR:="HIGHEST_RISK"]
DATA_RISK_USER_INCENTIVES<-DATA_RISK_USER_INCENTIVES[PREDICTED_COLOR=="#F03B20",PREDICTED_COLOR:="HIGH_RISK"]
DATA_RISK_USER_INCENTIVES<-DATA_RISK_USER_INCENTIVES[PREDICTED_COLOR=="#FD8D3C",PREDICTED_COLOR:="MEDIUM_RISK"]
DATA_RISK_USER_INCENTIVES<-DATA_RISK_USER_INCENTIVES[PREDICTED_COLOR=="#FECC5C",PREDICTED_COLOR:="LOW_RISK"]
DATA_RISK_USER_INCENTIVES<-DATA_RISK_USER_INCENTIVES[PREDICTED_COLOR=="#FFFFB2",PREDICTED_COLOR:="LOWEST_RISK"]
table(INCENTIVOS$USER_NAME,INCENTIVOS$PREDICTED_COLOR)
table(NO_INCENTIVOS$USER_NAME,NO_INCENTIVOS$PREDICTED_COLOR)
table(INCENTIVOS$USER_NAME,INCENTIVOS$STATUS_INSPECCION)
table(NO_INCENTIVOS$USER_NAME,NO_INCENTIVOS$STATUS_INSPECCION)
DATA_A_INCENTIVOS<-INCENTIVOS[USER_NAME=='A']
DATA_A_INCENTIVOS$COUNT<-unlist(1)
DATA_A_1<-aggregate(COUNT~FECHA+PREDICTED_COLOR+STATUS_INSPECCION,data = DATA_A_INCENTIVOS,FUN = sum)
setDT(DATA_A_1)
DATA_A_1<-DATA_A_1[order(DATA_A_1$FECHA)]
DATA_A_1$INCENTIVOS<-unlist(1)
DATA_A_NO_INCENTIVOS<-NO_INCENTIVOS[USER_NAME=='A']
DATA_A_NO_INCENTIVOS$COUNT<-unlist(1)
DATA_A_1_NOINCENTIVOS<-aggregate(COUNT~FECHA+PREDICTED_COLOR+STATUS_INSPECCION,data = DATA_A_NO_INCENTIVOS,FUN = sum)
setDT(DATA_A_1_NOINCENTIVOS)
DATA_A_1_NOINCENTIVOS<-DATA_A_1_NOINCENTIVOS[order(DATA_A_1_NOINCENTIVOS$FECHA)]
DATA_A_1_NOINCENTIVOS$INCENTIVOS<-unlist(0)
DATOS_A<-rbind(DATA_A_1,DATA_A_1_NOINCENTIVOS)
DATOS_TOTALES_A<-aggregate(COUNT~FECHA,data = DATOS_A,FUN = sum)
A_CONSOLIDADO<-merge(DATOS_A,DATOS_TOTALES_A,by = "FECHA",all = TRUE)
View(A_CONSOLIDADO)
dat1 <- read_excel(file,1) #all data
library(readxl)
library(pgirmess)
file = file.choose() #file name: 'Risk levels visited_clean'
dat1 <- read_excel(file,1) #all data
View(dat1)
shapiro.test(dat1$app)
dat1 <- read_excel(file,1) #all data
View(dat1)
shapiro.test(dat1$app)
shapiro.test(dat1$arm)
t.test(dat1$app,
dat1$arm,
paired=TRUE,
conf.level=0.95)
Difference = dat1$app - dat1$arm
hist(Difference,
col="gray",
main="Histogram of differences",
xlab="Difference")
class(data$app)
class(dat1$app)
t.test(dat1$arm=="app",
dat1$arm=="croquis",
paired=TRUE,
conf.level=0.95)
Difference = dat1$app - dat1$arm
shapiro.test(dat1$arm)
shiny::runApp('PETM-shiny/shiny')
peru1 <- getData('GADM', country=c('PER'), level=1, path=tdcero)
library(ggplot2)
library(data.table)
library(raster)
setwd("~/CLAUDIA-DATOS-/")
### CALL SHAPEFILES ###
## DISTRICT AND BEYOND...
tdcero <- tempdir() # save the directory
#peru0 <- getData('GADM', country=c('PER'), level=0, path=tdcero)
peru1 <- getData('GADM', country=c('PER'), level=1, path=tdcero)
shapefile <- readOGR("~/Spatial-surveillance/MAP_CODES/PERU_SHAPES/PER_adm0.shp", "PER_adm0.shp")
library(rgdal)
library(ggmap)
shapefile <- readOGR("~/Spatial-surveillance/MAP_CODES/PERU_SHAPES/PER_adm0.shp", "PER_adm0.shp")
shapefile <- readOGR("~/Spatial-surveillance/MAP_CODES/PERU_SHAPES/PER_adm0.shp", "PER_adm0")
shapefile <- readOGR("~/Spatial-surveillance/MAP_CODES/PERU_SHAPES/", "PER_adm0")
shapefile <- shapefile("~/Spatial-surveillance/MAP_CODES/PERU_SHAPES/PER_adm0.shp")
plot(peru1)
plot(shapefile)
peru1 <- getData('GADM', country=c('PER'), level=1, path=tdcero)
shapefile <- shapefile("~/Spatial-surveillance/MAP_CODES/PERU_SHAPES/PER_adm0.shp")
# Next the shapefile has to be converted to a dataframe for use in ggplot2
shapefile_df <- fortify(shapefile)
View(shapefile_df)
map <- ggplot() +
geom_path(data = shapefile_df,
aes(x = long, y = lat, group = group),
color = 'gray', fill = 'white', size = .2)
print(map)
map_projected <- map +
coord_map()
print(map_projected)
View(shapefile_df)
peru_1<- shapefile("~/Spatial-surveillance/MAP_CODES/PERU_SHAPES/PER_adm0.shp")
# Next the shapefile has to be converted to a dataframe for use in ggplot2
shapefile_df <- fortify(peru_1)
# Now the shapefile can be plotted as either a geom_path or a geom_polygon.
# Paths handle clipping better. Polygons can be filled.
# You need the aesthetics long, lat, and group.
map <- ggplot() +
geom_path(data = shapefile_df,
aes(x = long, y = lat, group = group),
color = 'gray', fill = 'white', size = .2)
print(map)
map_projected <- map +
coord_map()
print(map_projected)
peru_1<- shapefile("~/Spatial-surveillance/MAP_CODES/PERU_SHAPES/PER_adm0.shp")
peru_2<-shapefile("~/Spatial-surveillance/MAP_CODES/PERU_SHAPES/PER_adm1.shp")
peru_3<-shapefile("~/Spatial-surveillance/MAP_CODES/PERU_SHAPES/PER_adm3.shp")
peru1_df <- peru1@data
peru1_df <- peru_1@data
View(peru1_df)
peru1_df <- peru_1@data
peru2_df <- peru_2@data
peru3_df <- peru_3@data
## check variables in gadm2 - provinces
names(peru2@data)
View(peru2_df)
head(peru2@data, 3)
names(peru_2@data)
head(peru_2@data, 3)
AQP_prov <-  peru_2[peru_2$ID_1==4,]
AQP_prov_df <- AQP_prov@data
View(AQP_prov_df)
plot(AQP_prov) # OK
writeOGR(AQP_prov, dsn=".", layer="claudia codigos r/PRUEBAS/AQP_region_provinces",
driver="ESRI Shapefile")
names(peru_3@data)
head(peru_3@data, 3)
AQP_districts <-  peru_3[peru_3$ID_1==4,]
AQP_AQP_districts <- AQP_districts[AQP_districts$ID_2==35,]
plot(AQP_AQP_districts) # OK
AQP_AQP_districts_df <- AQP_AQP_districts@data
str(AQP_AQP_districts_df)
AQP_AQP_districts_df$fNAME_3 <- factor(AQP_AQP_districts_df$NAME_3)
levels(AQP_AQP_districts_df$fNAME_3)
writeOGR(AQP_AQP_districts, dsn=".", layer="claudia codigos r/PRUEBAS/AQP_AQP_province_districts",
driver="ESRI Shapefile")
# Plotear
plot(AQP_AQP_districts, col="ivory2")
plot(AQP_prov, add=TRUE, lwd=2)
box()
qtm(AQP_AQP_districts, fill="white") +
tm_text("NAME_3")
install.packages("shape")
qtm(AQP_AQP_districts, fill="white") +
tm_text("NAME_3")
names(AQP_AQP_districts_df)
# [1] "OBJECTID"  "ID_0"      "ISO"       "NAME_0"    "ID_1"      "NAME_1"
# [7] "ID_2"      "NAME_2"    "ID_3"      "NAME_3"    "CCN_3"     "CCA_3"
# [13] "TYPE_3"    "ENGTYPE_3" "NL_NAME_3" "VARNAME_3" "fNAME_3"
str(AQP_AQP_districts_df)
# $ ID_3     : int  330 331 332 333 334 335 336 337 338 339 ...
# $ NAME_3   : chr  "Alto Selva Alegre" "Arequipa" "Cayma" "Cerro Colorado" ...
unique(sort(AQP_AQP_districts_df$ID_3))
# [1] 330 331 332 333 334 335 336 337 338 339 340 341 342 343 344 345 346 347 348 349
# [21] 350 351 352 353 354 355 356 357 358 359
levels(as.factor(AQP_AQP_districts_df$NAME_3))
# Recode names
AQP_AQP_districts$NAME_3 <- recode(AQP_AQP_districts$NAME_3,
`Alto Selva Alegre` = "A.S.A.",
`Cayma` = "CAYMA",
`Cerro Colorado` = "C. COLORADO",
`Jacobo Hunter` = "HUNTER",
`Jose Luis Bustamante Y Rivero` = "J. L. B Y R",
`Mariano Melgar` = "M. MELGAR",
`Miraflores` = "MIRAFLORES",
`Paucarpata` = "PAUCARPATA",
`Sachaca` = "SACHACA",
`Socabaya` = "SOCABAYA",
`Uchumayo` = "UCHUMAYO",
`Yura` = "YURA",
`Arequipa` = "AREQUIPA",
`Characato` = "CHARACATO",
`Chiguata` = "CHIGUATA",
`La Joya` = "LA JOYA",
`Laguna Loriscota` = "L. LORISCOTA",
`Mollebaya` = "MOLLEBAYA",
`Pocsi` = "POCSI",
`Polobaya` = "POLOBAYA",
`Quequeña` = "QUEQUEÑA",
`Sabandia` = "SABANDIA",
`San Juan de Siguas` = "S.J. Siguas",
`San Juan de Tarucani` = "S.J. Tarucani",
`Santa Isabel de Siguas` = "S.I. de Siguas",
`Santa Rita de Siguas` = "S.R. de Siguas",
`Tiabaya` = "TIABAYA",
`Vitor` = "VITOR",
`Yanahuara` = "YANAHUARA",
`Yarabamba` = "YARABAMBA")
AQP_AQP_districts_df <- AQP_AQP_districts@data
install.packages("tmap")
qtm(AQP_AQP_districts, fill="white") +
tm_text("NAME_3")
library(shape)
library(tmap)
qtm(AQP_AQP_districts, fill="white") +
tm_text("NAME_3")
AQP_AQP_districts$NAME_3 <- recode(AQP_AQP_districts$NAME_3,
`Alto Selva Alegre` = "A.S.A.",
`Cayma` = "CAYMA",
`Cerro Colorado` = "C. COLORADO",
`Jacobo Hunter` = "HUNTER",
`Jose Luis Bustamante Y Rivero` = "J. L. B Y R",
`Mariano Melgar` = "M. MELGAR",
`Miraflores` = "MIRAFLORES",
`Paucarpata` = "PAUCARPATA",
`Sachaca` = "SACHACA",
`Socabaya` = "SOCABAYA",
`Uchumayo` = "UCHUMAYO",
`Yura` = "YURA",
`Arequipa` = "AREQUIPA",
`Characato` = "CHARACATO",
`Chiguata` = "CHIGUATA",
`La Joya` = "LA JOYA",
`Laguna Loriscota` = "L. LORISCOTA",
`Mollebaya` = "MOLLEBAYA",
`Pocsi` = "POCSI",
`Polobaya` = "POLOBAYA",
`Quequeña` = "QUEQUEÑA",
`Sabandia` = "SABANDIA",
`San Juan de Siguas` = "S.J. Siguas",
`San Juan de Tarucani` = "S.J. Tarucani",
`Santa Isabel de Siguas` = "S.I. de Siguas",
`Santa Rita de Siguas` = "S.R. de Siguas",
`Tiabaya` = "TIABAYA",
`Vitor` = "VITOR",
`Yanahuara` = "YANAHUARA",
`Yarabamba` = "YARABAMBA")
AQP_AQP_districts_df <- AQP_AQP_districts@data
# Plot again
install.packages("memisc")
library(memisc)
AQP_AQP_districts$NAME_3 <- recode(AQP_AQP_districts$NAME_3,
`Alto Selva Alegre` = "A.S.A.",
`Cayma` = "CAYMA",
`Cerro Colorado` = "C. COLORADO",
`Jacobo Hunter` = "HUNTER",
`Jose Luis Bustamante Y Rivero` = "J. L. B Y R",
`Mariano Melgar` = "M. MELGAR",
`Miraflores` = "MIRAFLORES",
`Paucarpata` = "PAUCARPATA",
`Sachaca` = "SACHACA",
`Socabaya` = "SOCABAYA",
`Uchumayo` = "UCHUMAYO",
`Yura` = "YURA",
`Arequipa` = "AREQUIPA",
`Characato` = "CHARACATO",
`Chiguata` = "CHIGUATA",
`La Joya` = "LA JOYA",
`Laguna Loriscota` = "L. LORISCOTA",
`Mollebaya` = "MOLLEBAYA",
`Pocsi` = "POCSI",
`Polobaya` = "POLOBAYA",
`Quequeña` = "QUEQUEÑA",
`Sabandia` = "SABANDIA",
`San Juan de Siguas` = "S.J. Siguas",
`San Juan de Tarucani` = "S.J. Tarucani",
`Santa Isabel de Siguas` = "S.I. de Siguas",
`Santa Rita de Siguas` = "S.R. de Siguas",
`Tiabaya` = "TIABAYA",
`Vitor` = "VITOR",
`Yanahuara` = "YANAHUARA",
`Yarabamba` = "YARABAMBA")
AQP_AQP_districts_df <- AQP_AQP_districts@data
View(AQP_AQP_districts_df)
# Plot again
qtm(AQP_AQP_districts, fill="white") +
tm_text("NAME_3")
qtm(AQP_AQP_districts, fill="white") +
tm_text("NAME_3")
districts.i <- c("A.S.A.", "CAYMA", "C. COLORADO", "CHARACATO", "HUNTER",
"J. L. B Y R", "LA JOYA", "M. MELGAR", "MIRAFLORES",
"MOLLEBAYA", "PAUCARPATA", "SACHACA", "UCHUMAYO",
"TIABAYA", "SOCABAYA")
# for(i in districts.i){
#   print(i)
#   AQP_AQP_districts.i <- AQP_AQP_districts[AQP_AQP_districts$NAME_3 == i,]
#   AQP_AQP_districts.i_df <- AQP_AQP_districts.i@data
#   plot(AQP_AQP_districts.i)
#   writeOGR(AQP_AQP_districts.i, dsn=".",
#            layer=paste("output/Casos_INS/Scripts/outputs/", i, "_district", sep=""),
#            driver="ESRI Shapefile")
#   }
#
indicadores<-fread("~/CLAUDIA-DATOS-/cap03030.csv")
library(ggplot2)
library(data.table)
library(raster)
#library(car)
library(dplyr)
library(plyr)
#install.packages("tmap")
library(tmap)
library(rgdal)
library(ggmap)
setwd("~/CLAUDIA-DATOS-/")
library(shape)
library(tmap)
library(memisc)
indicadores<-fread("~/CLAUDIA-DATOS-/cap03030.csv")
View(indicadores)
